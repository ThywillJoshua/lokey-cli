@if (!loading() && fileSelectorForm.get('file')) {
<div class="translate">
  <div class="translate__page-title">
    <h1 appText [variant]="'title'" class="translate__page-title__text">
      {{ key() }}
    </h1>
  </div>

  <div class="translate__main" [formGroup]="form">
    <div class="translate__main__default-file">
      <textarea
        appTextInput
        appText
        [placeholder]="defaultFile()"
        id="textarea"
        [formControlName]="defaultFile()"
      ></textarea>
      @if (defaultFileState === 'current') {
      <app-label
        class="translate__main__default-file__status"
        [status]="'current'"
      ></app-label>
      } @else if (defaultFileState === 'changed') {
      <app-label
        class="translate__main__default-file__status"
        [status]="'changed'"
      ></app-label>
      } @else if (defaultFileState === 'updated') {
      <app-label
        class="translate__main__default-file__status"
        [status]="'updated'"
      ></app-label>
      }
      <div class="translate__main__default-file__cta">
        <button
          appNotificationLabel
          [notifyLabelText]="'Success!'"
          [disabled]="defaultFileState !== 'changed'"
          appButton
          [variant]="'default'"
          (click)="undoChange(defaultFile())"
        >
          <b>Undo</b>
        </button>
        <button
          appNotificationLabel
          [notifyLabelText]="'Success!'"
          [disabled]="defaultFileState !== 'changed'"
          appButton
          [variant]="'default'"
          (click)="confirmChange(defaultFile())"
        >
          <b>Confirm</b>
        </button>
      </div>
    </div>
    <div class="translate__main__trash-icon">
      <app-svg-icon
        [iconName]="'trash'"
        (click)="showDeleteModal.set(true)"
      ></app-svg-icon>
    </div>
    <div class="translate__main__selected-file">
      @for (file of filesExcludingDefault(); track $index) { @if (file ===
      fileSelectorForm.get('file')?.getRawValue()) {
      <textarea
        appTextInput
        appText
        name=""
        id="textarea"
        [formControlName]="file"
      ></textarea>
      } }

      <label
        class="translate__main__selected-file__selector"
        [formGroup]="fileSelectorForm"
      >
        <span appText [variant]="'info'">File: </span>

        <select appTextInput [variant]="'xs'" formControlName="file">
          @for (file of filesExcludingDefault(); track $index) {
          <option [value]="file">
            {{ file }}
          </option>
          }
        </select>
      </label>

      @if (selectedFileState === 'current') {
      <app-label
        class="translate__main__selected-file__status"
        [status]="'current'"
      ></app-label>
      } @else if (selectedFileState === 'changed') {
      <app-label
        class="translate__main__selected-file__status"
        [status]="'changed'"
      ></app-label>
      } @else if (selectedFileState === 'updated') {
      <app-label
        class="translate__main__selected-file__status"
        [status]="'updated'"
      ></app-label>
      }

      <div class="translate__main__selected-file__cta">
        <button
          [disabled]="selectedFileState !== 'changed'"
          appButton
          [variant]="'default'"
          (click)="undoChange(selectedFileName)"
        >
          <b>Undo</b>
        </button>
        <button
          [disabled]="selectedFileState !== 'changed'"
          appButton
          [variant]="'default'"
          (click)="confirmChange(selectedFileName)"
        >
          <b>Confirm</b>
        </button>
      </div>
    </div>
  </div>

  @if (showDeleteModal()) {
  <app-modal (closeModal)="showDeleteModal.set(false)">
    <div class="translate__delete-modal">
      <div class="translate__delete-modal__body">
        <h1 appText [variant]="'title'">Delete key</h1>

        <div class="translate__delete-modal__body__text-contianer"></div>
        <p
          appText
          [variant]="'paragraph'"
          class="translate__delete-modal__body__text-container__text"
        >
          The key <b>{{ key() }}</b> will be deleted from all files.
        </p>

        <p><b>ARE YOU SURE?</b></p>
      </div>
      <div class="translate__delete-modal__cta">
        <button
          appButton
          [variant]="'default'"
          (click)="showDeleteModal.set(false)"
        >
          <b>No</b>
        </button>
        <button
          appButton
          [variant]="'default'"
          (click)="deleteSelectedKey(); showDeleteModal.set(false)"
        >
          <b>Yes</b>
        </button>
      </div>
    </div>
  </app-modal>
  }
</div>
}
